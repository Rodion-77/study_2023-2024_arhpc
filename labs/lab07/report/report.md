---
## Front matter
title: "Лабораторная работа №7"
subtitle: "Команды безусловного и условного переходов в Nasm. Программирование ветвлений"
author: "Павличенко Родион Андреевич"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
  - spelling=modern
  - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы
Понять принцип работы условных и безусловных переходов в Ассемблере и научиться писать программы с командами, отвечающими за переходы. Научиться работать с файлами листинга и уметь их читать.

# Выполнение лабораторной работы

Для начала выполнения лабораторной работы необходимо создать рабочую папку lab07 и файл lab7-1.asm :

![Создание рабочей директории и файла lab7-1.asm](image/7-1.png)

После чего, для удобства, запустить Midnight commander :

![Запуск Midnight commander](image/7-2.png)

Вставим код в файл lab7-1.asm из файла листинга :

![Вставка кода из файла листинга 7.1](image/7-3.png)

Теперь скопируем файл in_out.asm из рабочей директории прошлой лабораторной работы с помощью команды F5:

![Копирование файла in_out.asm в рабочую директорию](image/7-4.png)

Теперь соберём программу из файла lab7-1.asm и запустим её :

![Сборка программы из файла lab7-1.asm и её запуск](image/7-5.png)

Изменим файл lab7-1.asm согласно листингу 7.2 :

![Изменение файла lab7-1.asm согласно листингу 7.2](image/7-6.png)

Снова соберём программу и запустим её :

![Повторная сборка программы из файла lab7-1.asm и её запуск](image/7-7.png)

Теперь сделаем так, чтобы код выводил сообщения в обратном порядке (от 3 сообщения к первому). Для этого внесём в код следующие изменения :

![Редактирование файла lab7-1.asm](image/7-8.png)

И запустим её, предварительно собрав :

![Повторная сборка программы из файла lab7-1.asm и её запуск](image/7-9.png)

Теперь создадим файл lab7-2.asm :

![Создание второго файла: lab7-2.asm](image/7-10.png)

Запишем код из листинга 7.3 в файл lab7-2.asm :

![Запись кода из листинга 7.3 в файл lab7-2.asm](image/7-11.png)

И запустим его, предварительно собрав :

![сборка программы из файла lab7-2.asm и её запуск](image/12.png)

Теперь попробуем создать файл листинга при сборке файла lab7-2.asm :

![Создание файла листинга из файла lab6-2.asm](image/7-13.png)

Теперь посмотрим, как выглядит файл листинга изнутри. Для этого откроем его в mcedit :

![Открытие файла листинга в текстовом редакторе](image/7-14.png)

Открыв его, мы видим следующую картину :

![Вид файла листинга](image/7-15.png)

Наша программа находится чуть ниже :

![Нахождение нашей программы в файле листинга](image/7-16.png)
Разберём несколько строк файла листинга: 
<p><br>1. Строка msg1 db 'Введите B: ', 0h
Это объявление строки msg1 в разделе .data, которая содержит текст 'Введите B:
' и заканчивается нулевым байтом (`0h`). Этот нулевой байт используется для
обозначения конца строки в ассемблере. Строка msg1 предназначена для вывода
на экран, чтобы запросить у пользователя ввод значения переменной B.
<p><br>2. Строка A dd '20'
В этой строке создается переменная A в разделе .data, и ей присваивается
значение '20', представленное как dd, что означает "double word" (двойное слово
или 4 байта). Значение '20' хранится в 16-ричном формате (т.е. это не число 20 в
десятичной системе, а символы `'20'`). Это значение может использоваться в
программе для выполнения различных операций.
<p><br>3. Строка mov eax, msg1
В этой строке в разделе .text перемещается адрес строки msg1 в регистр eax.
Это делается для того, чтобы передать указатель на строку msg1 функции sprint,
которая будет отвечать за вывод сообщения на экран. Эта строка помогает
организовать вывод текста, запрашивающего ввод пользователя.
Теперь попробуем намеренно допустить ошибку в нашем коде, убрав у команды
move 1 операнд

<p><br>Теперь попробуем намеренно допустить ошибку в нашем коде, убрав у команды move 1 операнд :

![Изменение исходного файла](image/7-17.png)

И попробуем собрать файл с ошибкой, генерируя файл листинга :

![Вывод ошибки при сборке объектного файла](image/7-18.png)

Мы видим, что объектный файл не создался, однако появился файл листинга.
Теперь зайдём в файл листинга, и посмотрим, отображается ли в нём ошибка :

![Отображение ошибки в листинге](image/7-19.png)

Как видим, в листинге прописана ошибка

# Выполнение задания для самостоятельной работы

Создадим файл для выполнения самостоятельной работы. Мой вариант - 1 :

![Создание первого файла самостоятельной работы](image/7-20.png)

Напишем код для выполнения задания. Код выглядит так:

![Код первого файла самостоятельной работы](image/7-21.png)

Соберём, запустим его и посмотрим на результат:

![Сборка и запуск программы первого задания самостоятельной работы, а также результат выполнения](image/7-22.png)

Теперь создадим второй файл самостоятельной работы для второго задания :

![Создание второго файла самостоятельной работы](image/7-23.png)

Код будет выглядеть так :

![Код второго файла самостоятельной работы](image/7-24.png)



![Код второго файла самостоятельной работы (продолжение)](image/7-25.png)

Соберём исполняемый файл и запустим его :

![Сборка и тестирование второго файла самостоятельной работы](image/7-26.png)

Как видим, программа всё посчитала правильно

# Выводы

В результате работы над лабораторной работой были написаны программы, которые используют команды условных и безусловных переходов, были получены навыки работы с этими командами, а также были созданы и успешно прочитаны листинги для некоторых из программ.
